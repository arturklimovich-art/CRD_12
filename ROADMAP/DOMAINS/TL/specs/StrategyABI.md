# üéØ STRATEGY-ABI ‚Äî TradLab

## üì¶ –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã

### Signal
–û–±—ä–µ–∫—Ç —Å–∏–≥–Ω–∞–ª–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

```python
from dataclasses import dataclass
import pandas as pd

@dataclass
class Signal:
    strategy_id: str
    ts: pd.Timestamp   # UTC
    symbol: str
    side: str          # "LONG" or "SHORT"
    size: float        # quantity (ETH)
    sl: float          # Stop-Loss price
    tp1: float         # Take-Profit 1 price
    tp2: float         # Take-Profit 2 price
    tsl: float | None  # Trailing Stop-Loss
    valid_until: pd.Timestamp
    meta: dict
```

---

### BaseStrategy
–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π.

```python
from typing import List
import pandas as pd

class BaseStrategy:
    def generate_signals(self, features_df: pd.DataFrame) -> List[Signal]:
        """
        –í—Ö–æ–¥: DataFrame —Å —Ñ–∏—á–∞–º–∏ –∏–∑ lab.features_v1
        –í—ã—Ö–æ–¥: –°–ø–∏—Å–æ–∫ —Å–∏–≥–Ω–∞–ª–æ–≤
        """
        raise NotImplementedError
```

---

## üîÑ –ö–æ–Ω—Ç—Ä–∞–∫—Ç –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞

### –í—Ö–æ–¥ (features_df)
- **–¢–∏–ø:** `pandas.DataFrame`
- **–ò–Ω–¥–µ–∫—Å:** `pandas.DatetimeIndex` (UTC)
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏:**
  - `ts_4h` ‚Äî timestamp 4H-–±–∞—Ä–∞
  - `open_4h`, `high_4h`, `low_4h`, `close_4h` ‚Äî OHLC 4H
  - `volume_4h` ‚Äî –æ–±—ä—ë–º 4H
  - `close_1h` ‚Äî —Ü–µ–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏—è 1H-–±–∞—Ä–∞
  - `atr_14_1h` ‚Äî ATR(14) –Ω–∞ 1H (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
  - `sma_50_4h` ‚Äî SMA(50) –Ω–∞ 4H (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)

### –í—ã—Ö–æ–¥ (List[Signal])
- **–¢–∏–ø:** `List[Signal]`
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
  - –ö–∞–∂–¥—ã–π —Å–∏–≥–Ω–∞–ª –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω (–ø—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–º –≤—Ö–æ–¥–µ ‚Üí –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –≤—ã—Ö–æ–¥)
  - –í—Å–µ —Ü–µ–Ω—ã (`sl`, `tp1`, `tp2`) —Ä–∞—Å—Å—á–∏—Ç–∞–Ω—ã –∏ –≤–∞–ª–∏–¥–Ω—ã
  - `valid_until` > `ts`

---

## ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
1. **–î–µ—Ç–µ—Ä–º–∏–Ω–∏–∑–º:** –°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π
2. **–Ø–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:** –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —è–≤–Ω—ã–º–∏ (–Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–∫—Ä—ã—Ç—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π)
3. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å:** –°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–π (unit-—Ç–µ—Å—Ç—ã —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –≤—Ö–æ–¥–æ–º)
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –ö–∞–∂–¥–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –≤ `specs/`

---

## üìÖ –í–µ—Ä—Å–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- **–í–µ—Ä—Å–∏—è:** 1.0.0
- **–î–∞—Ç–∞:** 2025-11-24
- **–ê–≤—Ç–æ—Ä:** arturklimovich-art
