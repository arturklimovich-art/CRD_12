"""
Demo-?????? ??? ???????????? ?????????
?????????? ????????????? OHLCV ??????
"""
from datetime import datetime, timedelta
from typing import List, Dict

def generate_demo_ohlcv(
    symbol: str = "BTCUSDT",
    bars: int = 100,
    start_price: float = 50000.0,
    volatility: float = 0.02
) -> List[Dict]:
    """
    ?????????? ????????????? OHLCV ??????
    
    Args:
        symbol: ???????? ????
        bars: ?????????? ??????
        start_price: ????????? ????
        volatility: ????????????? (0.02 = 2%)
    
    Returns:
        ?????? ???????? ? OHLCV ???????
    """
    import random
    
    data = []
    current_price = start_price
    timestamp = datetime(2024, 1, 1, 0, 0, 0)
    
    for i in range(bars):
        # ????????? ????????? ????
        change = random.uniform(-volatility, volatility)
        current_price *= (1 + change)
        
        # ?????????? OHLC
        open_price = current_price
        high_price = open_price * (1 + abs(random.uniform(0, volatility/2)))
        low_price = open_price * (1 - abs(random.uniform(0, volatility/2)))
        close_price = random.uniform(low_price, high_price)
        volume = random.uniform(100, 1000)
        
        data.append({
            "timestamp": timestamp,
            "open": round(open_price, 2),
            "high": round(high_price, 2),
            "low": round(low_price, 2),
            "close": round(close_price, 2),
            "volume": round(volume, 2)
        })
        
        timestamp += timedelta(hours=1)
        current_price = close_price
    
    return data

if __name__ == "__main__":
    # ???? ????????? ??????
    data = generate_demo_ohlcv(bars=10)
    print("Demo OHLCV data (first 10 bars):")
    for bar in data:
        print(f"  {bar['timestamp']} | O:{bar['open']} H:{bar['high']} L:{bar['low']} C:{bar['close']}")
