UPDATE eng_it.roadmap_tasks
SET
  status = 'done',
  completed_at = NOW(),
  description = '??????????? ??????? ??????? ? ?????????. ??????? core.events ??????? ? ????????. ?????? System-Snapshot-Auto.ps1 ???????? ??? ??????????? ??????? snapshot.done.',
  steps = '[
    {"code": "E1-L3-S1", "title": "???????? ??????? core.events", "status": "done", "done": true},
    {"code": "E1-L3-S2", "title": "???????? views ??? ???????", "status": "done", "done": true},
    {"code": "E1-L3-S3", "title": "?????????? Invoke-EventsLog.ps1", "status": "done", "done": true},
    {"code": "E1-L3-S4", "title": "?????????? ??????????? snapshot.done", "status": "done", "done": true},
    {"code": "E1-L3-S5", "title": "???????????? ???????", "status": "done", "done": true}
  ]'::jsonb,
  mechanisms = '[
    {"kind": "db_table", "ref": "core.events", "description": "??????????? ??????? ???????"},
    {"kind": "db_view", "ref": "core.v_bot_events", "description": "View ??? bot-???????"},
    {"kind": "db_view", "ref": "core.v_llm_events", "description": "View ??? LLM-???????"},
    {"kind": "file", "ref": "DB/EVENTS_SCHEMA.sql", "description": "SQL-????? core.events"},
    {"kind": "file", "ref": "scripts/System-Snapshot-Auto.ps1", "description": "?????? ? ???????????? ???????"},
    {"kind": "file", "ref": "agents/EngineersIT.Bot/Private/Invoke-EventsLog.ps1", "description": "PowerShell-??????? ???????"}
  ]'::jsonb,
  artifacts = '[
    {"kind": "code", "ref": "commit:f97843b", "description": "feat(events): add snapshot.done event logging", "created_at": "2025-11-17T17:06:14Z"},
    {"kind": "log", "ref": "core.events:snapshot.done", "description": "??????? ? ??", "created_at": "2025-11-17T17:06:14Z"}
  ]'::jsonb,
  updated_at = NOW()
WHERE id = 1007;
