# 📊 TradLab Trading System - Session Context

**Version:** 2.0
**Date:** 2025-11-28T18:17:59Z
**Domain:** TL
**Progress:** 82% (14/17 tasks)

---

## 🚀 QUICK START

```powershell
# 1. Navigate
cd "C:\Users\Artur\Documents\CRD12"

# 2. Git status
git status

# 3. Check progress
docker exec -i crd12_pgvector psql -U crd_user -d crd12 -c "SELECT code, title, status FROM eng_it.roadmap_tasks WHERE domain_code='TL' LIMIT 10;"
```

---

## 📂 PROJECT ROOT

```
C:\Users\Artur\Documents\CRD12
```

---

## 🗄️ DATABASES (CRITICAL!)

### Database 1: Roadmap & Core (crd12)

```yaml
Port: 5433
Container: crd12_pgvector
Database: crd12
User: crd_user
Purpose: Roadmap, tasks, events
```

**Connection:**
```powershell
docker exec -i crd12_pgvector psql -U crd_user -d crd12
```

⚠️ **DO NOT USE FOR TradLab data!**

### Database 2: TradLab Data (tradlab_db)

```yaml
Port: 5434
Container: tradlab_postgres
Database: tradlab_db
User: tradlab
Password: crd12
Purpose: OHLCV, features, backtests
```

**Connection:**
```powershell
docker exec -i tradlab_postgres psql -U tradlab -d tradlab_db
```

**Key Tables:**
- market.ohlcv - OHLCV data
- lab.features_v1 - Feature store
- lab.results - Backtest results
- lab.trades - Individual trades

⚠️ **USE THIS for all TradLab operations!**

**CRITICAL:** TWO SEPARATE databases on DIFFERENT PORTS!

---

## 📊 STATUS

**Statistics:**
- Total: 17 tasks
- Done: 14 (82%)
- In Progress: 0
- Planned: 3

### ✅ Completed (14)

- **TL-B5-T1**: Risk Gate
- **TL-B4-T2**: Metrics Calculator
- **TL-B4-T1**: Backtester V1
- **TL-B6-T1**: CLI run_backtest.py
- **TL-B8-T1**: Optimization: Grid Search STR-100
- **TL-B7-T2**: Trades Persistence
- **TL-B7-T1**: Results Persistence
- **TL-B3-T1**: Base Strategy + Signal
- **TL-B2-T2**: Feature Adapter V1
- **TL-B2-T1**: Database Schema Setup
- **TL-B3-T2**: STR-100 v3.2
- **E2-TL-B0-T3**: Интеграция TradLab с SoT (синхронизация roadmap)
- **E2-TL-B0-T2**: Quick Start: Минимальный бэктест
- **E2-TL-B0-T1**: Quick Start: Smoke-тест TradLab

### 📋 Planned (3)

- **T3**: API/CLI для синхронизации домена TL
- **T2**: Маппинг сигналов STR-100 → демо-ордера
- **T1**: Конфиг и клиент демо-биржи

---

## 📈 LATEST PERFORMANCE

```yaml
Run ID: STR-100_20251125_155147_453493ed
PnL: +-62.46% ❌
Sharpe: -0.27 ❌ (target ≥1.0)
Sortino: -0.37
Max DD: 2.24%
Calmar: -0.28
Win Rate: 52.17%
Profit Factor: 0.92
Total Trades: 23
Avg Hold Time: 29h
Risk Gate: ❌ FAIL
```

---

## 💻 CODE

**Files:** 28 | **LOC:** 3679

- `src\tradlab\live\__init__.py` (1 LOC)
- `scripts\tradlab\generate_features.py` (194 LOC)
- `scripts\tradlab\live_bot.py` (322 LOC)
- `src\tradlab\live\binance_connector.py` (259 LOC)
- `src\tradlab\engine\__init__.py` (7 LOC)
- `src\tradlab\engine\strategies\str_100_chainflow_eth.py` (269 LOC)
- `src\tradlab\engine\strategies\__init__.py` (3 LOC)
- `scripts\tradlab\run_optimization.py` (171 LOC)
- `scripts\tradlab\test_binance_connection.py` (36 LOC)
- `scripts\tradlab\__init__.py` (1 LOC)

---

## 🎯 NEXT STEPS

1. 🟢 LOW **T3**: API/CLI для синхронизации домена TL
2. 🟢 LOW **T2**: Маппинг сигналов STR-100 → демо-ордера
3. 🟢 LOW **T1**: Конфиг и клиент демо-биржи

---

## 🤖 FOR AI AGENT: UPDATE PROGRESS

**After completing a task, run:**

```powershell
cd C:\Users\Artur\Documents\CRD12\agents\EngineersIT.Bot
.\Update-Progress.ps1 -TaskCode 'YOUR-TASK-CODE' -Status 'done'
```

**Statuses:** done | in_progress | planned | blocked

**Example:**
```powershell
.\Update-Progress.ps1 -TaskCode 'TL-B7-T2' -Status 'done' -Description 'Fixed trades persistence'
```

---

**[OK] Context restored. Ready!**
