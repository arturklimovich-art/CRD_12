ğŸ“˜ ĞŸĞĞ¡ĞŸĞĞ Ğ¢ ĞŸĞ ĞĞ•ĞšĞ¢Ğ ENGINEERS_IT (CRD12)
ğŸ¯ ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
Engineers_IT (CRD12) - Ğ¡Ğ°Ğ¼Ğ¾Ğ¾Ğ±ÑƒÑ‡Ğ°ÑÑ‰Ğ°ÑÑÑ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¼ Ğ´ĞµĞ¿Ğ»Ğ¾ĞµĞ¼

Ğ’ĞµÑ€ÑĞ¸Ñ: 2.0
Ğ”Ğ°Ñ‚Ğ°: 2025-11-11
Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: âœ… Production Ready

ğŸ“‹ ĞĞ“Ğ›ĞĞ’Ğ›Ğ•ĞĞ˜Ğ•
ĞĞ±Ğ·Ğ¾Ñ€ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°
ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
Telegram Bot
Engineer API
PatchManager
Ğ Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑÑ‹
Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚
API Reference
Troubleshooting
ğŸ” ĞĞ‘Ğ—ĞĞ  Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ«
Ğ§Ñ‚Ğ¾ ÑÑ‚Ğ¾?
Engineers_IT - ÑÑ‚Ğ¾ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ:

ĞŸÑ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ñ‡ĞµÑ€ĞµĞ· Telegram Bot
Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ ĞºĞ¾Ğ´ Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ LLM (DeepSeek)
ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑĞµÑ‚ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ñ Ğ²ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼
Ğ¥Ñ€Ğ°Ğ½Ğ¸Ñ‚ Ğ¿Ğ¾Ğ»Ğ½ÑƒÑ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ²ÑĞµÑ… Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹
ĞŸĞ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµÑ‚ Ğ¾Ñ‚ĞºĞ°Ñ‚Ğ¸Ñ‚ÑŒÑÑ Ğº Ğ»ÑĞ±Ğ¾Ğ¹ Ğ²ĞµÑ€ÑĞ¸Ğ¸ ĞºĞ¾Ğ´Ğ°
ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸
âœ… Telegram Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ - ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· Ğ¼ĞµÑÑĞµĞ½Ğ´Ğ¶ĞµÑ€
âœ… Roadmap ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° - Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡
âœ… ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹ - ĞºĞ¾Ğ´ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑĞµÑ‚ÑÑ Ğ±ĞµĞ· Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ğ¼ĞµÑˆĞ°Ñ‚ĞµĞ»ÑŒÑÑ‚Ğ²Ğ°
âœ… Ğ’ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ - ĞºĞ°Ğ¶Ğ´Ğ¾Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ
âœ… Smoke testing - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ¾Ğ´Ğ° Ğ¿ĞµÑ€ĞµĞ´ Ğ´ĞµĞ¿Ğ»Ğ¾ĞµĞ¼
âœ… Curator Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° - Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹ Ğ¿ĞµÑ€ĞµĞ´ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸ĞµĞ¼
âœ… Rollback Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼ - Ğ¾Ñ‚ĞºĞ°Ñ‚ Ğº Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ğ¼ Ğ²ĞµÑ€ÑĞ¸ÑĞ¼

ğŸ—ï¸ ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ
Ğ’Ñ‹ÑĞ¾ĞºĞ¾ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ğ°Ñ ÑÑ…ĞµĞ¼Ğ°
Code
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬                            â”‚
â”‚                    (Telegram Client)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TELEGRAM BOT                              â”‚
â”‚              (bot_integrated.py)                             â”‚
â”‚  ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹: /add_task, /run_roadmap, /status, /help          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ROADMAP                                 â”‚
â”‚               (eng_it.tasks Ğ² PostgreSQL)                    â”‚
â”‚  Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑÑ‹: planned â†’ in_progress â†’ done/failed               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   TASK MANAGER                               â”‚
â”‚              (tasks/task_manager.py)                         â”‚
â”‚  ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Roadmap ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚, Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ENGINEER API                               â”‚
â”‚          (engineer_b_api: app.py + main.py)                 â”‚
â”‚  Endpoint: POST /agent/analyze                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LLM (DeepSeek)                            â”‚
â”‚              Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ´Ğ° Ğ¸Ğ· Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  CURATOR (ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°)                          â”‚
â”‚         Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ´Ğ°                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PATCH MANAGER                               â”‚
â”‚         (patch_manager.py + patch_applier.py)               â”‚
â”‚  â€¢ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ¿Ğ°Ñ‚Ñ‡ Ğ² Ğ‘Ğ”                                        â”‚
â”‚  â€¢ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ğ²ĞµÑ€ÑĞ¸Ñ ÑÑ‚Ğ°Ñ€Ğ¾Ğ³Ğ¾ Ñ„Ğ°Ğ¹Ğ»Ğ°                           â”‚
â”‚  â€¢ Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ approve_token                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PATCH API                                  â”‚
â”‚         POST /api/patches/{id}/apply                        â”‚
â”‚  â€¢ ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ÑĞµÑ‚ Ğ¿Ğ°Ñ‚Ñ‡ Ğº Ñ„Ğ°Ğ¹Ğ»Ñƒ                                   â”‚
â”‚  â€¢ Smoke test                                                â”‚
â”‚  â€¢ Ğ›Ğ¾Ğ³Ğ¸Ñ€ÑƒĞµÑ‚ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Ğ¤ĞĞ™Ğ›ĞĞ’ĞĞ¯ Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ                             â”‚
â”‚            /app/<target_file> Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½                      â”‚
â”‚     Ğ’ĞµÑ€ÑĞ¸Ñ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ° Ğ² eng_it.code_versions                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ§© ĞšĞĞœĞŸĞĞĞ•ĞĞ¢Ğ« Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ«
1. Docker ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹
ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€	ĞŸĞ¾Ñ€Ñ‚	ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ
crd12_bot	-	Telegram Bot + Task Manager
crd12_engineer_b_api	8001 â†’ 8000	Engineer API (Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ´Ğ°)
crd12_pgvector	5433 â†’ 5432	PostgreSQL + pgvector
crd12_deepseek_proxy	8010	ĞŸÑ€Ğ¾ĞºÑĞ¸ Ğ´Ğ»Ñ DeepSeek API
crd12_ollama	11434	Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ LLM (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
2. ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹
Ğ’ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğµ crd12_bot:
Code
/app/
â”œâ”€â”€ bot_integrated.py          # Telegram Bot (ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹)
â”œâ”€â”€ tasks/
â”‚   â”œâ”€â”€ task_manager.py        # ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº Ğ·Ğ°Ğ´Ğ°Ñ‡
â”‚   â”œâ”€â”€ code_generator.py      # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ´Ğ°
â”‚   â””â”€â”€ post_deploy.py         # ĞŸĞ¾ÑÑ‚-Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸
â”œâ”€â”€ config.py                  # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”œâ”€â”€ database.py                # ORM Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
â””â”€â”€ utils/                     # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
Ğ’ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğµ crd12_engineer_b_api:
Code
/app/
â”œâ”€â”€ app.py                     # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ API (+ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ PatchManager)
â”œâ”€â”€ main.py                    # Patch API endpoints
â”œâ”€â”€ patch_manager.py           # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ‚Ñ‡Ğ°Ğ¼Ğ¸
â”œâ”€â”€ patch_applier.py           # Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ğ°Ñ Ğ¾Ğ±Ñ‘Ñ€Ñ‚ĞºĞ°
â”œâ”€â”€ curator.py                 # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ¾Ğ´Ğ°
â””â”€â”€ agents/                    # Ğ¡Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸
3. ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
Ğ’ crd12_bot:

bash
TELEGRAM_BOT_TOKEN=7263212857:AAGU_wi4XqccG--bK6g-6UvsQ0jLG0rVGmQ
DATABASE_URL=postgres://crd_user:crd12@pgvector:5432/crd12
ENGINEER_B_API_URL=http://engineer_b_api:8000
SELF_BUILDING_MODE=true
POST_DEPLOY_VALIDATE=true
Ğ’ crd12_engineer_b_api:

bash
DATABASE_URL=postgres://crd_user:crd12@crd12_pgvector:5432/crd12
OPENAI_API_KEY=sk-proj-...
OPENAI_MODEL_NAME=gpt-5-thinking
ğŸ—„ï¸ Ğ‘ĞĞ—Ğ Ğ”ĞĞĞĞ«Ğ¥
Ğ¡Ñ…ĞµĞ¼Ğ°: eng_it
ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹:
1. tasks - Roadmap Ğ·Ğ°Ğ´Ğ°Ñ‡

SQL
CREATE TABLE eng_it.tasks (
    id TEXT PRIMARY KEY,
    title TEXT NOT NULL,
    status TEXT NOT NULL,  -- planned, in_progress, done, blocked, failed
    owner TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW(),
    progress_notes TEXT,
    created_by TEXT DEFAULT 'manual',  -- telegram_bot, manual, system
    telegram_chat_id BIGINT,           -- ID Ñ‡Ğ°Ñ‚Ğ° Ğ¾Ñ‚ĞºÑƒĞ´Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ°
    priority INTEGER DEFAULT 0          -- ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ (Ğ²Ñ‹ÑˆĞµ = Ğ²Ğ°Ğ¶Ğ½ĞµĞµ)
);
2. patches - Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¿Ğ°Ñ‚Ñ‡ĞµĞ¹

SQL
CREATE TABLE eng_it.patches (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    author TEXT NOT NULL,
    filename TEXT NOT NULL,
    content BYTEA NOT NULL,             -- Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ Ğ¿Ğ°Ñ‚Ñ‡Ğ°
    sha256 TEXT NOT NULL,
    status TEXT DEFAULT 'pending',      -- pending, validated, applied, failed
    approve_token TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    applied_at TIMESTAMPTZ,
    task_id TEXT REFERENCES eng_it.tasks(id),
    generated_by TEXT DEFAULT 'manual', -- llm_auto, manual
    previous_version_id TEXT,           -- Ğ¡ÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° Ğ²ĞµÑ€ÑĞ¸Ñ Ğ² code_versions
    target_file TEXT                    -- ĞŸÑƒÑ‚ÑŒ Ğº Ñ†ĞµĞ»ĞµĞ²Ğ¾Ğ¼Ñƒ Ñ„Ğ°Ğ¹Ğ»Ñƒ
);
3. code_versions - Ğ’ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ´Ğ°

SQL
CREATE TABLE eng_it.code_versions (
    version_id TEXT PRIMARY KEY,
    file_path TEXT NOT NULL,
    content TEXT NOT NULL,              -- ĞŸĞ¾Ğ»Ğ½Ğ¾Ğµ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ°
    content_hash TEXT NOT NULL,
    task_id TEXT REFERENCES eng_it.tasks(id),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    is_stable BOOLEAN DEFAULT false,    -- Stable snapshot Ğ´Ğ»Ñ rollback
    created_by TEXT DEFAULT 'system'
);
4. patch_events - Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ğ¿Ğ°Ñ‚Ñ‡ĞµĞ¹

SQL
CREATE TABLE eng_it.patch_events (
    id BIGSERIAL PRIMARY KEY,
    patch_id UUID REFERENCES eng_it.patches(id),
    event_type TEXT NOT NULL,           -- eng.patch.created, eng.patch.applied
    payload JSONB,
    ts TIMESTAMPTZ DEFAULT NOW()
);
5. telegram_messages - Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹

SQL
CREATE TABLE eng_it.telegram_messages (
    id BIGSERIAL PRIMARY KEY,
    chat_id BIGINT NOT NULL,
    user_id BIGINT,
    username TEXT,
    message_text TEXT NOT NULL,
    message_type TEXT DEFAULT 'text',   -- text, command, document
    bot_response TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW()
);
6. bot_context - ĞŸĞ°Ğ¼ÑÑ‚ÑŒ Ğ±Ğ¾Ñ‚Ğ°

SQL
CREATE TABLE eng_it.bot_context (
    id SERIAL PRIMARY KEY,
    context_key TEXT NOT NULL UNIQUE,
    context_value JSONB NOT NULL,
    description TEXT,
    updated_at TIMESTAMPTZ DEFAULT NOW()
);
7. bot_commands - ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ Ğ±Ğ¾Ñ‚Ğ°

SQL
CREATE TABLE eng_it.bot_commands (
    id BIGSERIAL PRIMARY KEY,
    chat_id BIGINT NOT NULL,
    command TEXT NOT NULL,
    arguments JSONB,
    status TEXT DEFAULT 'pending',      -- pending, processing, completed, failed
    result JSONB,
    task_id TEXT REFERENCES eng_it.tasks(id),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    completed_at TIMESTAMPTZ
);
8. job_queue - ĞÑ‡ĞµÑ€ĞµĞ´ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡

SQL
CREATE TABLE eng_it.job_queue (
    id BIGSERIAL PRIMARY KEY,
    task_id TEXT REFERENCES eng_it.tasks(id),
    job_type TEXT NOT NULL,
    payload JSONB,
    status TEXT DEFAULT 'pending',
    attempts INTEGER DEFAULT 0,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);
ĞŸĞ¾Ğ»ĞµĞ·Ğ½Ñ‹Ğµ Views:
v_bot_dashboard - ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ñ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ°Ğ¼Ğ¸

SQL
SELECT id, title, status, priority, 
       COUNT(DISTINCT patches) as patches_count,
       COUNT(DISTINCT jobs) as jobs_count
FROM eng_it.tasks
WHERE status IN ('planned', 'in_progress')
ORDER BY priority DESC, created_at ASC;
ğŸ¤– TELEGRAM BOT
Ğ¤Ğ°Ğ¹Ğ»: /app/bot_integrated.py
ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹:
ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°	ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ	ĞŸÑ€Ğ¸Ğ¼ĞµÑ€
/start	ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ Ğ¸ ÑĞ¿Ğ¸ÑĞ¾Ğº ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´	/start
/help	Ğ¡Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ¿Ğ¾ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°Ğ¼	/help
/add_task <Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ>	Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ Ğ² Roadmap	/add_task Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ API endpoint /api/hello
/run_roadmap	Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ ÑĞ»ĞµĞ´ÑƒÑÑ‰ÑƒÑ planned Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ	/run_roadmap
/status	ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸	/status
Workflow ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ /add_task:
Python
# 1. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚
/add_task Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» hello.py Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸ĞµĞ¹ hello()

# 2. Bot ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ task_id
task_id = f"tg_{chat_id}_{timestamp}"  # tg_123456_1731354423

# 3. Ğ’ÑÑ‚Ğ°Ğ²ĞºĞ° Ğ² Ğ‘Ğ”
INSERT INTO eng_it.tasks (id, title, status, created_by, telegram_chat_id, priority)
VALUES ('tg_123456_1731354423', 'Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» hello.py...', 'planned', 'telegram_bot', 123456, 5);

# 4. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² telegram_messages
INSERT INTO eng_it.telegram_messages (chat_id, message_text, message_type, bot_response)
VALUES (123456, '/add_task ...', 'command', 'âœ… Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ°...');

# 5. Bot Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°ĞµÑ‚
âœ… Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ° Ğ² Roadmap!
ğŸ“ ID: tg_123456_1731354423
ğŸš€ Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ /run_roadmap Ğ´Ğ»Ñ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°
Workflow ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ /run_roadmap:
Python
# 1. ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¹ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸
SELECT id, title FROM eng_it.tasks
WHERE status = 'planned'
ORDER BY priority DESC, created_at ASC
LIMIT 1;

# 2. ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ°
UPDATE eng_it.tasks SET status = 'in_progress' WHERE id = 'tg_...';

# 3. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ² Engineer API
POST http://engineer_b_api:8000/agent/analyze
{
    "task": "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» hello.py...",
    "job_id": "tg_123456_1731354423"
}

# 4. ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° (~30-60 ÑĞµĞº)

# 5. ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° Ğ¿Ğ¾ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñƒ
UPDATE eng_it.tasks SET status = 'done' WHERE id = 'tg_...';  # ĞµÑĞ»Ğ¸ ÑƒÑĞ¿ĞµÑ…
# Ğ¸Ğ»Ğ¸
UPDATE eng_it.tasks SET status = 'failed' WHERE id = 'tg_...';  # ĞµÑĞ»Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°

# 6. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
âœ… Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ° ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾!
ğŸ¯ Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: ĞšĞ¾Ğ´ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½Ñ‘Ğ½ Ñ‡ĞµÑ€ĞµĞ· PatchManager
Ğ—Ğ°Ğ¿ÑƒÑĞº Bot:
bash
# Ğ’ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğµ crd12_bot
python3 /app/bot_integrated.py

# Ğ›Ğ¾Ğ³Ğ¸
tail -f /var/log/telegram_bot.log
âš™ï¸ ENGINEER API
Ğ¤Ğ°Ğ¹Ğ»: /app/app.py
ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ endpoint:
POST /agent/analyze

Request:

JSON
{
    "task": "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» agents/hello.py Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸ĞµĞ¹ hello() ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ 'Hello World'",
    "job_id": "tg_123456_1731354423"
}
Response (ÑƒÑĞ¿ĞµÑ…):

JSON
{
    "status": "passed",
    "analysis": "Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ° ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾",
    "is_complete": true,
    "generated_code": "def hello():\n    return 'Hello World'\n",
    "report": {
        "deployment_ready": true,
        "description": "Code applied via PatchManager to agents/hello.py",
        "tests_status": "passed",
        "patch_id": "340a3bdd-235b-4e34-98f1-6b8b62730d3f"
    }
}
Ğ’Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğ¹ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ:
Python
# 1. ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸
task_text = request_data["task"]
job_id = request_data["job_id"]

# 2. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ² LLM (DeepSeek)
analysis_result = await agent.run_cycle(task_text)
# â†’ Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚: analysis_text, generated_code, target_file

# 3. Smoke test (ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸Ñ Python)
smoke_test_ok = compile(generated_code, "<string>", "exec")

# 4. Runtime smoke test (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
runtime_smoke_ok, msg = run_runtime_smoke_test(generated_code, target_file)

# 5. Curator Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ°
review = curator.review(task_text, generated_code, target_file)
# â†’ Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚: {"approved": True/False, "score": 0-100}

# 6. Ğ•ÑĞ»Ğ¸ approved â†’ PatchManager
if review["approved"]:
    success, message, patch_id = apply_code_with_fallback(
        target_file=target_file,
        generated_code=generated_code,
        task_id=job_id,
        fallback_function=_apply_code_changes
    )
Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ PatchManager (Ğ² app.py):
Python
# Ğ’ ÑÑ‚Ñ€Ğ¾ĞºĞµ ~549 app.py
if PATCH_APPLIER_AVAILABLE:
    success, message, patch_id = apply_code_with_fallback(
        target_file=target_file,
        generated_code=generated_code,
        task_id=job_id,
        fallback_function=_apply_code_changes
    )
    applied_ok = success
    apply_msg = message
    backup_path = patch_id  # patch_id Ğ²Ğ¼ĞµÑÑ‚Ğ¾ backup_path
else:
    # Fallback Ğº ÑÑ‚Ğ°Ñ€Ğ¾Ğ¼Ñƒ Ğ¼ĞµÑ‚Ğ¾Ğ´Ñƒ
    applied_ok, apply_msg, backup_path = _apply_code_changes(target_file, generated_code)
ğŸ”§ PATCHMANAGER
Ğ¤Ğ°Ğ¹Ğ»Ñ‹:
/app/patch_manager.py - ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ
/app/patch_applier.py - Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ğ°Ñ Ğ¾Ğ±Ñ‘Ñ€Ñ‚ĞºĞ°
ĞšĞ»Ğ°ÑÑ PatchManager
ĞœĞµÑ‚Ğ¾Ğ´ create_patch_from_generated_code():
Python
def create_patch_from_generated_code(
    target_file: str,       # "agents/hello.py"
    generated_code: str,    # "def hello(): ..."
    task_id: str,           # "tg_123456_1731354423"
    author: str = "engineer_b_auto"
) -> Tuple[str, str]:      # (patch_id, approve_token)
ĞŸÑ€Ğ¾Ñ†ĞµÑÑ:

Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ patch_id (UUID)
Ğ•ÑĞ»Ğ¸ Ñ„Ğ°Ğ¹Ğ» ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚ â†’ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ñ‚ĞµĞºÑƒÑ‰ÑƒÑ Ğ²ĞµÑ€ÑĞ¸Ñ Ğ² code_versions
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ñ„Ğ°Ğ¹Ğ» Ğ¿Ğ°Ñ‚Ñ‡Ğ° Ğ² /app/workspace/patches_applied/{patch_id}.patch
Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ SHA256
Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ approve_token (auto-{task_id}-{timestamp})
Ğ’ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ² eng_it.patches
Ğ›Ğ¾Ğ³Ğ¸Ñ€ÑƒĞµÑ‚ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ Ğ² eng_it.patch_events
Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ (patch_id, approve_token)
ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:
Python
from patch_manager import PatchManager

pm = PatchManager(db_dsn="postgres://...")
patch_id, token = pm.create_patch_from_generated_code(
    target_file="agents/hello.py",
    generated_code="def hello(): return 'Hi'",
    task_id="tg_123456_1731354423"
)

# Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:
# patch_id = "340a3bdd-235b-4e34-98f1-6b8b62730d3f"
# token = "auto-tg_12345-1731354423"
Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ apply_code_with_fallback() (Ğ¸Ğ· patch_applier.py):
Python
def apply_code_with_fallback(
    target_file: str,
    generated_code: str,
    task_id: str,
    fallback_function = None
) -> Tuple[bool, str, str]:  # (success, message, patch_id)
ĞŸÑ€Ğ¾Ñ†ĞµÑÑ:

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ¿Ğ°Ñ‚Ñ‡ Ñ‡ĞµÑ€ĞµĞ· PatchManager
ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ POST Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğº /api/patches/{patch_id}/apply Ñ approve_token
Ğ•ÑĞ»Ğ¸ ÑƒÑĞ¿ĞµÑ… â†’ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ (True, "Success", patch_id)
Ğ•ÑĞ»Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ° Ğ¸ ĞµÑÑ‚ÑŒ fallback_function â†’ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ ĞµĞ³Ğ¾
Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚
ğŸ“¡ PATCH API
Ğ¤Ğ°Ğ¹Ğ»: /app/main.py
Endpoint: POST /api/patches/{patch_id}/apply
Request (Body as plain text):

Code
auto-tg_12345-1731354423
Response (ÑƒÑĞ¿ĞµÑ…):

JSON
{
    "status": "success",
    "message": "Patch applied and validated",
    "patch_id": "340a3bdd-235b-4e34-98f1-6b8b62730d3f",
    "target_file": "agents/hello.py",
    "sha256": "addb80e18b61fac6..."
}
ĞŸÑ€Ğ¾Ñ†ĞµÑÑ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ñ‚Ñ‡Ğ°:
Python
# 1. ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ‚Ñ‡Ğ° Ğ¸Ğ· Ğ‘Ğ”
SELECT * FROM eng_it.patches WHERE id = '340a3bdd...' AND status = 'validated';

# 2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° approve_token
if approve_token != patch.approve_token:
    return 403 Forbidden

# 3. Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ content (bytea â†’ text)
patch_content = patch.content.decode('utf-8')

# 4. Ğ—Ğ°Ğ¿Ğ¸ÑÑŒ Ğ² Ñ†ĞµĞ»ĞµĞ²Ğ¾Ğ¹ Ñ„Ğ°Ğ¹Ğ»
with open(f"/app/{target_file}", 'w') as f:
    f.write(patch_content)

# 5. Smoke test
compile(patch_content, "<string>", "exec")

# 6. ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ°
UPDATE eng_it.patches SET status = 'applied', applied_at = NOW() WHERE id = '340a3bdd...';

# 7. Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
INSERT INTO eng_it.patch_events (patch_id, event_type, payload)
VALUES ('340a3bdd...', 'eng.patch.applied', '{"target_file": "agents/hello.py"}');
ğŸ”„ Ğ ĞĞ‘ĞĞ§Ğ˜Ğ• ĞŸĞ ĞĞ¦Ğ•Ğ¡Ğ¡Ğ«
ĞŸÑ€Ğ¾Ñ†ĞµÑÑ 1: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ñ‡ĞµÑ€ĞµĞ· Telegram
Code
ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ â†’ /add_task Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ X
                    â†“
           Bot (bot_integrated.py)
                    â†“
    Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ğ² eng_it.tasks
                    â†“
        Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: planned, priority: 5
                    â†“
    Bot â†’ "âœ… Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ° Ğ² Roadmap!"
ĞŸÑ€Ğ¾Ñ†ĞµÑÑ 2: ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ (Task Manager)
Code
Task Manager (ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚)
                    â†“
    SELECT * FROM eng_it.tasks WHERE status = 'planned'
                    â†“
    Ğ•ÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ â†’ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ² Engineer API
                    â†“
    POST http://engineer_b_api:8000/agent/analyze
                    â†“
          Engineer API Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚
                    â†“
    Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ â†’ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸
ĞŸÑ€Ğ¾Ñ†ĞµÑÑ 3: Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº Ñ‡ĞµÑ€ĞµĞ· /run_roadmap
Code
ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ â†’ /run_roadmap
                    â†“
    Bot â†’ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ÑĞ»ĞµĞ´ÑƒÑÑ‰ÑƒÑ planned Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ
                    â†“
    ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ ÑÑ‚Ğ°Ñ‚ÑƒÑ â†’ in_progress
                    â†“
    ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ² Engineer API
                    â†“
    ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ (ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾)
                    â†“
    ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
ĞŸÑ€Ğ¾Ñ†ĞµÑÑ 4: Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¸ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ´Ğ°
Code
Engineer API Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ
                    â†“
    LLM Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ ĞºĞ¾Ğ´ + target_file
                    â†“
           Smoke test (ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸Ñ)
                    â†“
         Runtime smoke test
                    â†“
        Curator Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° (Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ)
                    â†“
    Ğ•ÑĞ»Ğ¸ approved â†’ PatchManager
                    â†“
    patch_applier.apply_code_with_fallback()
                    â†“
    PatchManager.create_patch_from_generated_code()
        â”œâ”€ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ°Ñ€Ğ¾Ğ¹ Ğ²ĞµÑ€ÑĞ¸Ğ¸ Ğ² code_versions
        â”œâ”€ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ğ² eng_it.patches
        â””â”€ Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² patch_events
                    â†“
    POST /api/patches/{id}/apply (Ñ approve_token)
                    â†“
    ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ‚Ñ‡Ğ° Ğº Ñ„Ğ°Ğ¹Ğ»Ñƒ
                    â†“
    Smoke test Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½Ñ‘Ğ½Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ´Ğ°
                    â†“
    ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° â†’ applied
                    â†“
    âœ… Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ·Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½!
ğŸš€ Ğ‘Ğ«Ğ¡Ğ¢Ğ Ğ«Ğ™ Ğ¡Ğ¢ĞĞ Ğ¢
Ğ”Ğ»Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ°:
1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
PowerShell
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²
docker ps --filter "name=crd12"

# ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:
# crd12_bot              - Up (Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ unhealthy)
# crd12_engineer_b_api   - Up (healthy)
# crd12_pgvector         - Up (healthy)
2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Bot
PowerShell
# Ğ›Ğ¾Ğ³Ğ¸ Bot
docker exec crd12_bot tail -f /var/log/telegram_bot.log

# Ğ”Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ:
# "Starting Telegram Bot v2.0"
# "Bot handlers registered. Starting polling..."
# "Application started"
3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Task Manager
PowerShell
# Ğ›Ğ¾Ğ³Ğ¸ Task Manager
docker exec crd12_bot tail -f /var/log/task_manager.log

# Ğ”Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ (ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚):
# "Checking for planned tasks..."
4. Ğ¢ĞµÑÑ‚ Ñ‡ĞµÑ€ĞµĞ· Telegram
Code
1. ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ Telegram
2. ĞĞ°Ğ¹Ğ´Ğ¸Ñ‚Ğµ Ğ±Ğ¾Ñ‚Ğ° (Ñ‚Ğ¾ĞºĞµĞ½: 7263212857:...)
3. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ: /start
4. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ: /add_task Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ test.py
5. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ: /run_roadmap
6. Ğ–Ğ´Ğ¸Ñ‚Ğµ ~30-60 ÑĞµĞº
7. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚Ğµ: "âœ… Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ° ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾!"
5. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ° Ğ² Ğ‘Ğ”
PowerShell
# Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸
docker exec crd12_pgvector psql -U crd_user -d crd12 -c "
SELECT id, title, status FROM eng_it.tasks ORDER BY created_at DESC LIMIT 5;
"

# ĞŸĞ°Ñ‚Ñ‡Ğ¸
docker exec crd12_pgvector psql -U crd_user -d crd12 -c "
SELECT id, status, target_file FROM eng_it.patches ORDER BY created_at DESC LIMIT 5;
"

# Ğ’ĞµÑ€ÑĞ¸Ğ¸
docker exec crd12_pgvector psql -U crd_user -d crd12 -c "
SELECT version_id, file_path FROM eng_it.code_versions ORDER BY created_at DESC LIMIT 5;
"
ğŸ“š API REFERENCE
Telegram Bot API (Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğ¹)
Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:
create_task_in_roadmap(task_id, title, chat_id, priority)

Python
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ Ğ² Roadmap
success = create_task_in_roadmap(
    task_id="tg_123_1731354423",
    title="Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ hello.py",
    chat_id=123456,
    priority=5
)
# Returns: True/False
get_next_planned_task()

Python
# ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ÑĞ»ĞµĞ´ÑƒÑÑ‰ÑƒÑ planned Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ
task = get_next_planned_task()
# Returns: {"id": "...", "title": "...", "priority": 5, ...}
update_task_status(task_id, status)

Python
# ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸
update_task_status("tg_123_...", "in_progress")
# Returns: True/False
get_active_tasks()

Python
# ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸
tasks = get_active_tasks()
# Returns: [{"id": "...", "title": "...", "status": "planned"}, ...]
Engineer API
POST /agent/analyze

bash
curl -X POST http://localhost:8001/agent/analyze \
  -H "Content-Type: application/json" \
  -d '{
    "task": "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» hello.py",
    "job_id": "test_123"
  }'
GET /health

bash
curl http://localhost:8001/health
# Response: {"status": "ok", "ts": "2025-11-11T19:27:03Z"}
Patch API
POST /api/patches/{patch_id}/apply

bash
curl -X POST http://localhost:8000/api/patches/340a3bdd.../apply \
  -H "Content-Type: text/plain" \
  -d "auto-test_tas-1731354423"
GET /api/patches/{patch_id}

bash
curl http://localhost:8000/api/patches/340a3bdd...
# Response: {"id": "...", "status": "applied", "target_file": "..."}
PatchManager API (Python)
Python
from patch_manager import PatchManager

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€Ğ°
pm = PatchManager(
    db_dsn="postgres://crd_user:crd12@pgvector:5432/crd12",
    base_path="/app",
    patches_dir="/app/workspace/patches_applied"
)

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ°Ñ‚Ñ‡Ğ°
patch_id, token = pm.create_patch_from_generated_code(
    target_file="agents/test.py",
    generated_code="def test(): pass",
    task_id="task_123",
    author="bot"
)
ğŸ› TROUBLESHOOTING
ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° 1: Bot Ğ½Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°ĞµÑ‚ Ğ² Telegram
Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ°:

PowerShell
docker exec crd12_bot tail -f /var/log/telegram_bot.log
ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ğ¾Ğµ:

Code
Starting Telegram Bot v2.0
Bot handlers registered. Starting polling...
Application started
Ğ•ÑĞ»Ğ¸ Ğ½ĞµÑ‚ â†’ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ:

ĞŸÑ€Ğ¾Ñ†ĞµÑÑ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½?
PowerShell
docker exec crd12_bot sh -c "pgrep -f bot_integrated || echo 'Not running'"
ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ‚Ğ¾ĞºĞµĞ½?
PowerShell
docker exec crd12_bot env | grep TELEGRAM_BOT_TOKEN
ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞº:
PowerShell
docker exec crd12_bot pkill -f bot_integrated
docker exec -d crd12_bot sh -c "nohup python3 /app/bot_integrated.py > /var/log/telegram_bot.log 2>&1 &"
ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° 2: Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ½Ğµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ
Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ°:

SQL
SELECT id, title, status FROM eng_it.tasks WHERE status = 'planned';
Ğ•ÑĞ»Ğ¸ Ğ·Ğ°Ğ´Ğ°Ñ‡ Ğ½ĞµÑ‚ â†’ ÑĞ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ñ‡ĞµÑ€ĞµĞ· /add_task

Ğ•ÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ, Ğ½Ğ¾ Ğ½Ğµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ÑÑ‚ÑÑ:

ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Task Manager:
PowerShell
docker exec crd12_bot tail -f /var/log/task_manager.log
Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ: /run_roadmap
ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° 3: ĞŸĞ°Ñ‚Ñ‡ Ğ½Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑĞµÑ‚ÑÑ
Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ°:

PowerShell
docker exec crd12_engineer_b_api tail -f /app/logs/app.log
ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ:

ĞŸĞ°Ñ‚Ñ‡ ÑĞ¾Ğ·Ğ´Ğ°Ğ½?
SQL
SELECT id, status FROM eng_it.patches WHERE task_id = 'tg_...';
approve_token Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹?
ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ:
bash
curl -X POST http://localhost:8000/api/patches/{id}/apply \
  -H "Content-Type: text/plain" \
  -d "auto-..."
ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° 4: Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ°
Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ°:

PowerShell
docker exec crd12_pgvector pg_isready -U crd_user
Ğ•ÑĞ»Ğ¸ Ğ½Ğµ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ°:

PowerShell
docker restart crd12_pgvector
ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ:

PowerShell
docker exec crd12_pgvector psql -U crd_user -d crd12 -c "SELECT 1"
ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° 5: Engineer API Ğ½Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°ĞµÑ‚
Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ°:

PowerShell
curl http://localhost:8001/health
Ğ•ÑĞ»Ğ¸ Ğ½Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°ĞµÑ‚:

PowerShell
docker logs crd12_engineer_b_api --tail 50
docker restart crd12_engineer_b_api
ĞŸÑ€Ğ¾ĞµĞºÑ‚: Engineers_IT (CRD12)
Ğ’ĞµÑ€ÑĞ¸Ñ: 2.0
Ğ”Ğ°Ñ‚Ğ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸: 2025-11-11

ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ: arturklimovich-art
Telegram Bot Token: 7263212857:AAGU_wi4XqccG--bK6g-6UvsQ0jLG0rVGmQ

âœ… Ğ§Ğ•ĞšĞ›Ğ˜Ğ¡Ğ¢ Ğ”Ğ›Ğ¯ ĞĞĞ’ĞĞ“Ğ Ğ ĞĞ—Ğ ĞĞ‘ĞĞ¢Ğ§Ğ˜ĞšĞ
 ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ğ» Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ Ğ²ÑĞµÑ… ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ² (docker ps)
 ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ğ» Ğ»Ğ¾Ğ³Ğ¸ Bot (tail -f /var/log/telegram_bot.log)
 ĞŸÑ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ» ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñƒ /start Ğ² Telegram
 Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ» Ñ‚ĞµÑÑ‚Ğ¾Ğ²ÑƒÑ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ Ñ‡ĞµÑ€ĞµĞ· /add_task
 Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ğ» Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ Ñ‡ĞµÑ€ĞµĞ· /run_roadmap
 ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ğ» Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ² Ğ‘Ğ” (SELECT * FROM eng_it.tasks)
 ĞĞ°ÑˆÑ‘Ğ» ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ°Ñ‚Ñ‡ (SELECT * FROM eng_it.patches)
 ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ğ» Ğ²ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (SELECT * FROM eng_it.code_versions)
 ĞŸÑ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ğ» ÑĞµĞºÑ†Ğ¸Ñ Troubleshooting
 Ğ“Ğ¾Ñ‚Ğ¾Ğ² Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ! ğŸš€
ğŸ‰ Ğ¤Ğ˜ĞĞĞ›
Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ° Ğº Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ!

Ğ’Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ:

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ñ‡ĞµÑ€ĞµĞ· Telegram
ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ´
ĞÑ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹
ĞÑ‚ĞºĞ°Ñ‚Ñ‹Ğ²Ğ°Ñ‚ÑŒÑÑ Ğº Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ğ¼ Ğ²ĞµÑ€ÑĞ¸ÑĞ¼
ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑÑ‹ Ñ‡ĞµÑ€ĞµĞ· Ğ‘Ğ”
Ğ£Ğ´Ğ°Ñ‡Ğ¸ Ğ² Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ! ğŸš€

Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ°: 2025-11-11 19:27:03 UTC



